<div class="register-container">
  <mat-card>
    <form (ngSubmit)="onSubmit()" #registerForm="ngForm">
      <h2 class="register-title">Register</h2>

      <mat-form-field appearance="fill">
        <mat-label>Username</mat-label>
        <input matInput required [(ngModel)]="form.username" name="username" #username="ngModel">
        <mat-error *ngIf="username.invalid && (username.dirty || username.touched)">
          Username is required
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Password</mat-label>
        <input matInput required type="password" [(ngModel)]="form.password" name="password" #password="ngModel" minlength="4">
        <mat-hint>Minimum 4 characters required</mat-hint>
        <mat-error *ngIf="password.invalid && (password.dirty || password.touched)">
          Password is required and should be at least 4 characters long
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>Confirm Password</mat-label>
        <input matInput required type="password" [(ngModel)]="form.confirmPassword" name="confirmPassword" #confirmPassword="ngModel">
        <mat-error *ngIf="confirmPassword.invalid && (confirmPassword.dirty || confirmPassword.touched)">
          You need to confirm your password
        </mat-error>
        <mat-error *ngIf="form.password !== form.confirmPassword && (confirmPassword.dirty || confirmPassword.touched)">
          Passwords do not match
        </mat-error>
      </mat-form-field>

      <div class="button-container">
        <button mat-raised-button color="primary" type="submit" [disabled]="loading || registerForm.invalid">
          Register
        </button>
        <button mat-raised-button color="primary" type="button" routerLink="/login" class="login-button">
          Login Page
        </button>
      </div>

      <div *ngIf="isSignUpFailed" class="error-message">{{ errorMessage }}</div>
    </form>
  </mat-card>
  <div *ngIf="loading" class="loading-overlay">
    <mat-spinner mode="indeterminate"></mat-spinner>
  </div>
</div>
